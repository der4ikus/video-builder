# üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ Fast Video Builder GPU Server

```
gpu-server/
‚îú‚îÄ‚îÄ üìã README.md                    # –û—Å–Ω–æ–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ üöÄ QUICK_START.md              # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è —á–∞–π–Ω–∏–∫–æ–≤  
‚îú‚îÄ‚îÄ üìñ SETUP_GUIDE.md              # –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è Vast.ai
‚îú‚îÄ‚îÄ üìù FILE_STRUCTURE.md           # –≠—Ç–æ—Ç —Ñ–∞–π–ª - –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ üê≥ docker-compose.yml          # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker
‚îú‚îÄ‚îÄ ‚öôÔ∏è env.example                 # –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ üåê api/                        # FastAPI —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                 # Docker –æ–±—Ä–∞–∑ –¥–ª—è API
‚îÇ   ‚îú‚îÄ‚îÄ main.py                    # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ API —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt           # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è API
‚îÇ
‚îú‚îÄ‚îÄ üîß worker/                     # Celery worker –¥–ª—è GPU –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                 # Docker –æ–±—Ä–∞–∑ –¥–ª—è worker
‚îÇ   ‚îú‚îÄ‚îÄ worker.py                  # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ worker
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt           # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è worker
‚îÇ   ‚îî‚îÄ‚îÄ code/                      # –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îÇ       ‚îú‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)
‚îÇ       ‚îú‚îÄ‚îÄ tts_kokoro.py          # TTS –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (API –≤–µ—Ä—Å–∏—è)
‚îÇ       ‚îú‚îÄ‚îÄ reverse_multiplier.py  # –£–º–Ω–æ–∂–µ–Ω–∏–µ –≤–∏–¥–µ–æ (API –≤–µ—Ä—Å–∏—è)
‚îÇ       ‚îî‚îÄ‚îÄ video_assembler.py     # –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ (API –≤–µ—Ä—Å–∏—è)
‚îÇ
‚îú‚îÄ‚îÄ üåç nginx/                      # Load balancer (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                 # Docker –æ–±—Ä–∞–∑ –¥–ª—è Nginx
‚îÇ   ‚îî‚îÄ‚îÄ nginx.conf                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx
‚îÇ
‚îî‚îÄ‚îÄ üõ†Ô∏è scripts/                    # –£—Ç–∏–ª–∏—Ç—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ setup.sh                   # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
    ‚îú‚îÄ‚îÄ start.sh                   # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
    ‚îú‚îÄ‚îÄ monitor.sh                 # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã –∏ GPU
    ‚îú‚îÄ‚îÄ auto_shutdown.sh           # –ê–≤—Ç–æ–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–æ—Å—Ç–æ–µ
    ‚îî‚îÄ‚îÄ test_api.py                # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
```

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### üåê API Server (`api/`)
- **FastAPI** —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø—Ä–∏–µ–º–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ–∞–π–ª—ã (–≤–∏–¥–µ–æ, –∞—É–¥–∏–æ, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è) –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –°–æ–∑–¥–∞–µ—Ç –∑–∞–¥–∞—á–∏ –≤ –æ—á–µ—Ä–µ–¥–∏ Redis
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –≥–æ—Ç–æ–≤—ã–µ –≤–∏–¥–µ–æ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### üîß Worker (`worker/`)
- **Celery** worker –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ GPU
- –í—ã–ø–æ–ª–Ω—è–µ—Ç 3 —ç—Ç–∞–ø–∞: TTS ‚Üí Video Multiplication ‚Üí Assembly
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –≤–∞—à–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ MinIO
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç NVENC –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ

### üê≥ Docker Services
- **Redis** - –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á
- **MinIO** - —Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- **API** - –≤–µ–± —Å–µ—Ä–≤–µ—Ä
- **Worker** - GPU –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–µ)
- **Nginx** - –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏

### üõ†Ô∏è –£—Ç–∏–ª–∏—Ç—ã (`scripts/`)
- `setup.sh` - –ø–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- `start.sh` - –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- `monitor.sh` - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ GPU, API, —Ä–µ—Å—É—Ä—Å–æ–≤
- `auto_shutdown.sh` - —ç–∫–æ–Ω–æ–º–∏—è —Å—Ä–µ–¥—Å—Ç–≤
- `test_api.py` - –ø–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ production
- –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è GPU
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ NVENC –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ —É—Å–∫–æ—Ä–µ–Ω–∏—è
- –£–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ GPU –ø–∞–º—è—Ç—å—é
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

### ‚úÖ –≠–∫–æ–Ω–æ–º–∏—á–Ω–æ –¥–ª—è Vast.ai
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–æ—Å—Ç–æ–µ
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–¥ RTX 3090/4090
- –ì–∏–±–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
- –ì–æ—Ç–æ–≤—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
- –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–°–∫–∞—á–∞–π—Ç–µ** –≤—Å—é –ø–∞–ø–∫—É `gpu-server/` –Ω–∞ –≤–∞—à GPU —Å–µ—Ä–≤–µ—Ä
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É: `./scripts/setup.sh`
3. **–°—Ç–∞—Ä—Ç—É–π—Ç–µ** —Å–µ—Ä–≤–∏—Å—ã: `./scripts/start.sh`
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ** API: `python3 scripts/test_api.py`

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### RTX 3090 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è):
- **4 –≤–æ—Ä–∫–µ—Ä–∞** –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **~3-5 –º–∏–Ω—É—Ç** –Ω–∞ 15-–º–∏–Ω—É—Ç–Ω–æ–µ –≤–∏–¥–µ–æ
- **~$0.15-0.25/—á–∞—Å** –Ω–∞ Vast.ai
- **6GB VRAM** –Ω–∞ –≤–æ—Ä–∫–µ—Ä

### –ü—Ä–∏–º–µ—Ä –Ω–∞–≥—Ä—É–∑–∫–∏:
- **20 –≤–∏–¥–µ–æ/—á–∞—Å** –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
- **480 –≤–∏–¥–µ–æ/–¥–µ–Ω—å** –ø—Ä–∏ 24/7 —Ä–∞–±–æ—Ç–µ
- **~$3.60-6.00/–¥–µ–Ω—å** –ø—Ä–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ –≤–∞—à–∏ –Ω—É–∂–¥—ã

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ–∞–π–ª–µ `.env`:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤
- –õ–∏–º–∏—Ç—ã GPU –ø–∞–º—è—Ç–∏  
- –ö–∞—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ
- –¢–∞–π–º–∞—É—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–≤—Ç–æ–≤—ã–∫–ª—é—á–µ–Ω–∏—è

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- üìñ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `README.md`, `SETUP_GUIDE.md`
- üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: `python3 scripts/test_api.py`
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: `./scripts/monitor.sh --watch`
- üìù **–õ–æ–≥–∏**: `docker-compose logs -f`
- üåê **API Docs**: `http://YOUR_IP:8000/docs`
